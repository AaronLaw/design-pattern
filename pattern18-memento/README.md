## 备忘录模式

**模式定义**

在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。

一个备忘录是一个对象，它存储另一个对象在某个瞬间的内部状态，后者被称为备忘录的原发器。

## 优点
1. 更好的封装性

    备忘录模式通过使用备忘录对象，来封装原发器对象的内部状态，虽然这个对象是保存在原发器对象的外部，
但是由于备忘录对象的窄接口并不提供任何方法。这样有效地保证了对原发器对象内部状态的封装，
不把原发器对象的内部实现细节暴露给外部。

1. 简化了原发器

    备忘录模式中，备忘录对象被保存到原发器对象之外，让客户来管理他们请求的状态，从而让原发器对象得到简化。

1. 窄接口和宽接口

    备忘录模式，通过引入窄接口和宽接口，使得不同的地方，对备忘录对象的访问是不一样的。
窄接口保证了只有原发器才可以访问备忘录对象的状态。

## 缺点
备忘录模式的缺点，是可能会导致高开销。

备忘录模式基本的功能，就是对备忘录对象的存储和恢复，它的基本实现方式就是缓存备忘录对象。
这样一来，如果需要缓存的数据量很大，或者是特别频繁地创建备忘录对象，开销是很大的。

## 本质
备忘录模式的本质：保存和恢复内部状态。

## 使用场景
建议在以下情况中选用备忘录模式。

1. 如果必须保存一个对象在某一个时刻的全部或者部分状态，方便在以后需要的时候，可以把该对象恢复到先前的状态，
可以使用备忘录模式。使用备忘录对象来封装和保存需要保存的内部状态，然后把备忘录对象保存到管理者对象中，
在需要的时候，再从管理者对象中获取备忘录对象，来恢复对象的状态。
1. 如果需要保存一个对象的内部状态，但是如果用接口来让其他对象直接得到这些需要保存的状态，
将会暴露对象的实现细节并破坏对象的封装性，这时可以使用备忘录模式，把备忘录对象实现成为原发器对象的内部类，
而且还是私有的，从而保证只有原发器对象才能访问该备忘录对象。这样既保存了需要保存的状态，
又不会暴露原发器对象的内部实现细节。
