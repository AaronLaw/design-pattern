## 工厂方法模式

**模式定义**

定义一个用于创建对象的接口，让子类决定实例化哪一个类，Factory Method使一个类的实例化延迟到其子类。

在工厂方法模式里面，客户端要么使用Creator对象，要么使用Creator创建的对象，一般客户端不直接使用工厂方法。

## 优点
1. 可以在不知具体实现的情况下编程
工厂方法模式可以让你在实现功能的时候，如果需要某个产品对象，只需要使用产品的接口即可，而无需关心具体的实现。
选择具体实现的任务延迟到子类去完成。
1. 更容易扩展对象的新版本
工厂方法给子类提供了一个挂钩，使得扩展新的对象版本变得非常容易。比如上面示例的参数化工厂方法实现中，
扩展一个新的导出xml文件格式的实现，已有的代码都不会改变，只要新加入一个子类来提供新的工厂方法实现，
然后在客户端使用这个新的子类即可。
1. 连接平行的类层次
工厂方法除了创造产品对象外，在连接平行的类层次上也大显身手。

## 缺点
1. 具体产品对象和工厂方法的耦合性。。
在工厂方法模式中，工厂方法是需要创建产品对象的，也就是需要选择具体的产品对象，并创建它们的实例，
因此具体产品对象和工厂方法是耦合的。

## 使用场景

建议在以下情况中选用工厂方法模式。

1. 如果一个类需要创建某个接口的对象，但是又不知道具体的实现，这种情况可以选用工厂方法模式，
把创建对象的工作延迟到子类中去实现。
2. 如果一个类本身就希望由它的子类来创建所需的对象的时候，应该使用工厂方法模式。

## 其他模式比较

跟简单工厂比较：

有些朋友可能会说，这不是跟简单工厂一样吗？

从本质上讲，它们确实是非常类似的，在具体实现上都是 “选择实现”。但是也存在不同点，简单工厂是直接在工厂类里面进行“选择实现”；
而工厂方法会把这个工作延迟到子类来实现，工厂类里面使用工厂方法的地方是依赖于抽象而不是具体的实现，
从而使得系统更加灵活，具有更好的可维护性和可扩展性。

还有一点就是：

* 工厂方法中，客户端要么使用Creator对象，要么使用Creator创建的对象。般客户端不直接使用工厂方法。
* 简单工厂中，客户端先要直接使用工厂方法，然后再去使用Creator创建的对象。

可以认为简单工厂就是工厂方法模式的一种特例

## 设计原则

工厂方法模式很好地体现了“依赖倒置原则”。

